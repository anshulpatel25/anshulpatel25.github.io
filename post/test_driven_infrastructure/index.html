<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=content-language content="en">
<meta name=author content="Anshul Patel">
<meta name=description content="Infrastructure-as-code provides a mechanism to apply changes to the system in a comprehensive manner so that the system reaches a desirable state.">
<meta name=keywords content="personal,geek,gamer,techie">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="DevOps: Test Driven Infrastructure using Serverspec">
<meta name=twitter:description content="Infrastructure-as-code provides a mechanism to apply changes to the system in a comprehensive manner so that the system reaches a desirable state.">
<meta property="og:title" content="DevOps: Test Driven Infrastructure using Serverspec">
<meta property="og:description" content="Infrastructure-as-code provides a mechanism to apply changes to the system in a comprehensive manner so that the system reaches a desirable state.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://www.anshulpatel.in/post/test_driven_infrastructure/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2017-02-14T00:00:00+00:00">
<meta property="article:modified_time" content="2017-02-14T00:00:00+00:00">
<base href=http://www.anshulpatel.in/post/test_driven_infrastructure/>
<title>
DevOps: Test Driven Infrastructure using Serverspec · Anshul Patel
</title>
<link rel=canonical href=http://www.anshulpatel.in/post/test_driven_infrastructure/>
<link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet>
<link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.0/css/all.css integrity=sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous>
<link rel=stylesheet href=http://www.anshulpatel.in/css/coder.min.6b2226bd9c0fa6ea0c3eb613b074869199b42ff23534af9eba76651ca16cf74c.css integrity="sha256-ayImvZwPpuoMPrYTsHSGkZm0L/I1NK+eunZlHKFs90w=" crossorigin=anonymous media=screen>
<script type=text/javascript>window._mNHandle=window._mNHandle||{},window._mNHandle.queue=window._mNHandle.queue||[],medianet_versionId="3121199"</script>
<script src="https://contextual.media.net/dmedianet.js?cid=8CUK8JJ25" async></script>
<link rel=icon type=image/png href=http://www.anshulpatel.in/images/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=http://www.anshulpatel.in/images/favicon-16x16.png sizes=16x16>
<meta name=generator content="Hugo 0.92.1">
</head>
<body class=colorscheme-light>
<main class=wrapper>
<nav class=navigation>
<section class=container>
<a class=navigation-title href=http://www.anshulpatel.in/>
Anshul Patel
</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fas fa-bars"></i></label>
<ul class=navigation-list>
<li class=navigation-item>
<a class=navigation-link href=http://www.anshulpatel.in/about/>About</a>
</li>
<li class=navigation-item>
<a class=navigation-link href=http://www.anshulpatel.in/post/>Blog</a>
</li>
<li class=navigation-item>
<a class=navigation-link href=http://www.anshulpatel.in/meetups/>Meetups</a>
</li>
<li class=navigation-item>
<a class=navigation-link href=http://www.anshulpatel.in/files/quotes.html>Quotes</a>
</li>
<li class="navigation-item menu-separator">
<span>|</span>
</li>
<li class=navigation-item>
<a href=http://www.anshulpatel.in/in-gj/>અમદાવાદી ગુજરાતી</a>
</li>
</ul>
</section>
</nav>
<div class=content>
<section class="container page">
<article>
<header>
<h1>DevOps: Test Driven Infrastructure using Serverspec</h1>
</header>
<p>Infrastructure-as-code provides a mechanism to apply changes to the system in a comprehensive manner so that the system reaches a desirable state.</p>
<h2 id=advantages-of-infra-as-code>Advantages of Infra-as-Code</h2>
<ul>
<li>Quick provisioning of new servers.</li>
<li>Quick recovery from critical events.</li>
<li>No more Snowflake servers.</li>
<li>Version control for server environments.</li>
<li>Like traditional code, it also requires testing to maintain its quality and integrity.</li>
<li>Auditable Infrastructure.</li>
</ul>
<h2 id=serverspec>Serverspec</h2>
<p>Serverspec provides a way to write RSpec test cases to validate the configuration of the system. It tests the server against its actual state by executing command locally, via SSH, via WinRM, via Docker API, etc.</p>
<p>Serverspec doesn&rsquo;t require any agent software on the system, providing flexibility to use any of the configuration management systems like Puppet, Chef, Ansible, BASH, etc.</p>
<h3 id=advantages-of-tdi>Advantages of TDI</h3>
<ul>
<li>Higher Code Quality</li>
<li>Regression Test suite</li>
<li>Feedback and Confidence</li>
</ul>
<h2 id=architecture>Architecture</h2>
<p><img src=http://www.anshulpatel.in/img/test_driven_infrastructure.png alt=Architecture></p>
<p>Explanation</p>
<ul>
<li>Configuration management (Puppet, Chef, Salt, Ansible, BASH, etc) script is checked into GitHub repository.</li>
<li>GitHub initiates CI process and spawns a VM (AWS EC2, Vagrant, VirtualBox, VMware). It applies the configuration management script to the VM and executes the test cases defined as per Serverspec.</li>
<li>If the test cases are successful, then CI process is marked as Passed.</li>
</ul>
<div id=329634253>
<script type=text/javascript>try{window._mNHandle.queue.push(function(){window._mNDetails.loadTag("329634253","300x250","329634253")})}catch(a){}</script>
</div>
</article>
</section>
</div>
<footer class=footer>
<section class=container>
<p>In my spare time, I plan World Domination from a secret villainous lair.</p>
©
2022
Anshul Patel
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.
</section>
</footer>
</main>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-93926186-1','auto'),ga('send','pageview'))</script>
</body>
</html>